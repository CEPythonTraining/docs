<!doctype html>
<html class="no-js" lang="en">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />
<link rel="index" title="Index" href="genindex.html" /><link rel="search" title="Search" href="search.html" /><link rel="next" title="Week 3: Build your Virtual Music Instrument" href="week3.html" /><link rel="prev" title="Week 1: Starting Python" href="week1.html" />

    <!-- Generated with Sphinx 6.2.1 and Furo 2023.05.20 -->
        <title>Week 2: Python on a remote system - Python Training documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo.css?digest=e6660623a769aa55fea372102b9bf3151b292993" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/tabs.css" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo-extensions.css?digest=30d1aed668e5c3a91c3e3bf6a60b675221979f0e" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="index.html"><div class="brand">Python Training  documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="index.html">
  
  
  <span class="sidebar-brand-text">Python Training  documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="resources.html">Resources and Materials</a></li>
<li class="toctree-l1"><a class="reference internal" href="week1.html">Week 1: Starting Python</a></li>
<li class="toctree-l1 current current-page"><a class="current reference internal" href="#">Week 2: Python on a remote system</a></li>
<li class="toctree-l1"><a class="reference internal" href="week3.html">Week 3: Build your Virtual Music Instrument</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          
<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main">
          <section id="week-2-python-on-a-remote-system">
<h1>Week 2: Python on a remote system<a class="headerlink" href="#week-2-python-on-a-remote-system" title="Permalink to this heading">#</a></h1>
<p>In this week, you’ll start using a remote system as a target for your Python projects. Of course, a Single Board Computer(SBC) can be a powerful system and you could use this to develop your application natively. But this is less fun than using the SBC as “just another embedded target”. Instead, you’ll continue to use your Windows host for software development and only run and debug the application on your SBC. This style of work – known as cross development – is often used for smaller systems that cannot run their own development environment natively.</p>
<section id="day-1-setting-up-the-remote-system">
<h2>Day 1: Setting up the remote system<a class="headerlink" href="#day-1-setting-up-the-remote-system" title="Permalink to this heading">#</a></h2>
<p>Theoretical part: study Chapter 9: “The Iterator Pattern” and Chapter 10: “Python Design Patterns I”. Make the exercises at the end of each chapter.</p>
<p>Practical part: setting up your the remote system.</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--0-input--1" name="tab-set--0" type="radio"><label class="tab-label" for="tab-set--0-input--1">Odroid M1</label><div class="tab-content docutils container">
<ul class="simple">
<li><dl class="simple">
<dt>The first step is to load the Ubuntu Operating System on a SD-card.</dt><dd><ul>
<li><p>Goto <a class="reference external" href="https://wiki.odroid.com/getting_started/os_installation_guide#tab__odroid-m1">https://wiki.odroid.com/getting_started/os_installation_guide#tab__odroid-m1</a></p></li>
<li><p>Download the “Server” image.</p></li>
<li><p>Follow the instructions from the side.</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The username/password is standard ordoid/odroid</p>
</div>
</div>
<input class="tab-input" id="tab-set--0-input--2" name="tab-set--0" type="radio"><label class="tab-label" for="tab-set--0-input--2">Raspberry Pi</label><div class="tab-content docutils container">
<img alt="_images/Picture13.png" class="align-right" src="_images/Picture13.png" />
<ul class="simple">
<li><p>The first step is to load the Raspberry Pi Operating System on a SD-card.</p></li>
<li><p>See the documentation from <a class="reference external" href="https://www.raspberrypi.com/documentation/computers/getting-started.html">https://www.raspberrypi.com/documentation/computers/getting-started.html</a></p></li>
<li><p>Follow the instructions from <a class="reference external" href="https://www.raspberrypi.org/software/">https://www.raspberrypi.org/software/</a>. The recommended way is using the Raspberry Pi Imager.</p></li>
</ul>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Make sure to install the Raspberry PI OS (64-bit) OS.</p>
</div>
</div>
</div>
<ul>
<li><p>Connect a display, a keyboard and a mouse to your remote system, insert the SD-card into the SD-slot and power-up your SBC. Go and explore what is available on your new computer.</p>
<blockquote>
<div><div class="admonition note">
<p class="admonition-title">Note</p>
<div class="line-block">
<div class="line">Please ensure that your SBC is on the same network as your laptop.</div>
<div class="line">Please note the IP-address of your SBC from the command:</div>
</div>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--1-input--1" name="tab-set--1" type="radio"><label class="tab-label" for="tab-set--1-input--1">Odroid M1</label><div class="tab-content docutils container">
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>ifconfig<span class="w"> </span>eth0
</pre></div>
</div>
</div>
<input class="tab-input" id="tab-set--1-input--2" name="tab-set--1" type="radio"><label class="tab-label" for="tab-set--1-input--2">Raspberry Pi</label><div class="tab-content docutils container">
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>ifconfig<span class="w"> </span>wlan0
</pre></div>
</div>
</div>
</div>
</div>
</div></blockquote>
</li>
</ul>
<img alt="_images/Picture14.png" class="align-right" src="_images/Picture14.png" />
<ul class="simple">
<li><p>Install PuTTY on your Windows computer from <a class="reference external" href="https://putty.org/">https://putty.org/</a>. You can now start an SSH session from your Windows machine to your SBC using PuTTY.</p></li>
<li><p>You can continue exploring the capabilities of your SBC and install new software when you want to. Use “apt” to install new packages, see <a class="reference external" href="https://itsfoss.com/apt-command-guide/">https://itsfoss.com/apt-command-guide/</a>.</p></li>
</ul>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--2-input--1" name="tab-set--2" type="radio"><label class="tab-label" for="tab-set--2-input--1">Odroid M1</label><div class="tab-content docutils container">
<p>You have a fully independent way to start a session on your SBC from your Windows computer.
You can use PuTTY/SSH to start a terminal session.</p>
</div>
<input class="tab-input" id="tab-set--2-input--2" name="tab-set--2" type="radio"><label class="tab-label" for="tab-set--2-input--2">Raspberry Pi</label><div class="tab-content docutils container">
<blockquote>
<div><ul class="simple">
<li><p>Install the “xrdp” package on your SBC to enable a remote desktop connection from your laptop, see  <a class="reference external" href="https://www.youtube.com/watch?v=qJ4jfqpL3Ck">https://www.youtube.com/watch?v=qJ4jfqpL3Ck</a>. You can now start an RDP session on your Windows computer and connect to your SBC.</p></li>
</ul>
<p>You have now two fully independent ways to start a session on your SBC from your Windows computer.
You can use PuTTY/SSH to start a terminal session and you can use RDP to start a full desktop session.</p>
</div></blockquote>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>If you need to find-out your laptop’s IP address, try running ipconfig from the command line.</p>
</div>
</div>
</div>
</section>
<hr class="docutils" />
<section id="day-2-cross-development">
<h2>Day 2: Cross Development<a class="headerlink" href="#day-2-cross-development" title="Permalink to this heading">#</a></h2>
<p>Theoretical part: study Chapter 11: “Python Design Patterns II” and Chapter 12: “Testing Object-Oriented Programs”.
Make the exercises at the end of each chapter.</p>
<p>Practical part: Cross Development on your SBC</p>
<p>The idea of cross development is that you use a full featured development system, running rich IDEs and other tools,
for developing your code that is actually executed on a smaller embedded device. In the case of a Raspberry Pi or
Odroid it would be possible to develop natively on the it, but the SBC also provides a nice training environment to
exercise with cross-development. Smaller systems don’t have the luxury of native development and then cross-development
is the way to go.</p>
<ul class="simple">
<li><p>The first step is to set-up file sharing for efficient interaction between your laptop and your SBC. On your Windows computer, enable file sharing (see 6.1).</p></li>
</ul>
<p>File a good place for your files and export that location. Mine is in C:\Users&lt;myname&gt;workspace. Right-click that
folder name, select properties and visit the tab “Sharing”. You can enable the share using the “Advanced Sharing”
option.
Once this is completed, you can see your share in the network locations in your Windows explorer.</p>
<ul>
<li><div class="line-block">
<div class="line">On your SBC, install a Samba client following the instructions in <a class="reference external" href="https://www.raspberrypi.com/documentation/computers/remote-access.html#samba-smbcifs">https://www.raspberrypi.com/documentation/computers/remote-access.html#samba-smbcifs</a>.</div>
<div class="line">Please note, when specifying your credentials in the mount command to include the domain of your Windows user, e.g.</div>
</div>
</li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>mkdir<span class="w"> </span>~/windowshare
sudo<span class="w"> </span>mount.cifs<span class="w"> </span>//&lt;laptops<span class="w"> </span>hostname<span class="w"> </span>or<span class="w"> </span>IP<span class="w"> </span>address&gt;/share<span class="w"> </span>/home/&lt;username&gt;/windowshare<span class="w"> </span>-o<span class="w"> </span><span class="nv">user</span><span class="o">=</span>&lt;name&gt;,domain<span class="o">=</span>CORP,vers<span class="o">=</span><span class="m">3</span>.11
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>you can also make your SBC a Samba server. You’ll find the instructions to do so on the same Samba page. With your SBC running a Samba server you can easily put files on your SBC’s file system.</p>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>using the mount.cifs command you’re actually logging into your Windows computer again. Therefore, use your Windows credentials for username and password.</p>
</div>
</section>
<section id="day-3-network-application-programming">
<h2>Day 3: Network Application Programming<a class="headerlink" href="#day-3-network-application-programming" title="Permalink to this heading">#</a></h2>
<p>Theoretical part: More on Patterns!
You’ve gone through the material provided in the textbook. But pattens are such an important concept, that it can hardly
be explained enough in just two chapters and delt with in just two days. Therefore, we’ll make some more time to study
patterns from other sources.
Study the material found in <a class="reference external" href="https://github.com/faif/python-patterns">https://github.com/faif/python-patterns</a> or use <a class="reference external" href="https://www.geeksforgeeks.org/python-design-patterns/">https://www.geeksforgeeks.org/python-design-patterns/</a>.</p>
<p>Practical part: network programming using MQTT.</p>
<img alt="_images/Picture15.png" class="align-right" src="_images/Picture15.png" />
<p>MQTT is a lightweight and easy to use network protocol, developed for applications with little resources. It is well
suited for transmitting the data from a single sensor, but also for more data intensive applications. Many IoT
applications make use of MQTT or one of the similar protocols.
Read the introduction on <a class="reference external" href="https://mqtt.org/">https://mqtt.org/</a>. You may also find useful information on <a class="reference external" href="https://en.wikipedia.org/wiki/MQTT">https://en.wikipedia.org/wiki/MQTT</a>.</p>
<ul class="simple">
<li><p>MQTT requires a broker. Install Eclipse’s Mosquitto on your SBC, see <a class="reference external" href="https://mosquitto.org/">https://mosquitto.org/</a>. Of course, you’ll install Mosquitto using:</p></li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>apt-get<span class="w"> </span>install<span class="w"> </span>mosquitto
</pre></div>
</div>
<ul class="simple">
<li><p>Once your MQTT-broker is running, you’ll need a client application to start playing around with MQTT. Install MQTT-explorer on your laptop and configure it to connect to the MQTT-broker on your SBC. You can get MQTT-explorer from here: <a class="reference external" href="http://mqtt-explorer.com/">http://mqtt-explorer.com/</a>.</p></li>
<li><p>Follow the tutorial on <a class="reference external" href="https://www.emqx.io/blog/how-to-use-mqtt-in-python">https://www.emqx.io/blog/how-to-use-mqtt-in-python</a> to create your first Python MQTT applications. Please note that the sample code in this tutorial uses some broker on the Internet, at broker.emqx.io, whereas you can use your own on your Pi.</p></li>
<li><p>When you’re working on the same network, you can hook-up to the same MQTT-broker. Subscribing both a listener allows you so see the MQTT-messages appear simultaneously in multiple locations; having multiple applications posting messages allows you to observe the interaction of multiple senders.</p></li>
<li><p>You will find that the code of the MQTT-examples has some hardcoded parameters, e.g. the broker address, the port of the broker, and some more. We would like to pick-up these parameters from the command line. Python has an elegant command line parser, argparse. On the page <a class="reference external" href="https://realpython.com/command-line-interfaces-python-argparse/">https://realpython.com/command-line-interfaces-python-argparse/</a> you’ll find a good explanation how to use argparse. Rewrite the MQTT applications to make use of argparse for all parameter handling.</p></li>
</ul>
</section>
<section id="day-4-concurrency-and-asyncio">
<h2>Day 4: Concurrency and AsyncIO<a class="headerlink" href="#day-4-concurrency-and-asyncio" title="Permalink to this heading">#</a></h2>
<p>The theory for today is about multi-programming and concurrency. These are techniques to have multiple control flows or
tasks running more-or-less in parallel. Even in the case that the tasks share one physical compute resource, e.g. one
single core, the tasks may appear to work independently and simultaneously. Python has inherent difficulties with
concurrency, due to its inner structure. You may already have wondered why you needed 2 Python MQTT applications,
yesterday.</p>
<p>With AsyncIO a new paradigm is introduced that overcomes these hurdles. AyncIO provides a very elegant, Pythonic way for
implementing concurrency in programs.</p>
<p>Study Chapter 13: “Concurrency”. Make the exercises at the end of the chapter. This chapter gives a condensed
introduction to Python’s Asyncio concepts. Also study the more elaborate tutorial on <a class="reference external" href="https://realpython.com/async-io-python/">https://realpython.com/async-io-python/</a>.
The library pages on AsyncIO differentiate between the High-level API and the Low-level API. You’ll find useful
information for the usage of AsyncIO in network programs in the Low-level API.</p>
<p>Practical part: use AsyncIO to implement concurrency in your MQTT applications.</p>
<p>Once you have completed the RealPython tutorial on AsyncIO, you can use <a class="reference external" href="https://pypi.org/project/asyncio-mqtt/">https://pypi.org/project/asyncio-mqtt/</a> to
understand what the AsyncIO-flavored MQTT implementation looks like.
Use these ingredients to rewrite the publish and subscribe applications, created yesterday, into one single application,
doing both tasks.</p>
</section>
<section id="day-5-iot-and-grafana">
<h2>Day 5: IoT and Grafana<a class="headerlink" href="#day-5-iot-and-grafana" title="Permalink to this heading">#</a></h2>
<p>You’ve completed the entire book “Python 3 Object-Oriented Programming”, theory is up for this course.
The Internet of Things deals with devices and their data using the Internet. It is common to have a centralized data
processing and management service on the Internet, often in the cloud, and to connect remote devices to such a service.
In the architecture of common IoT application, one can distinguish a couple of common practices or components:</p>
<img alt="_images/Picture16.png" class="align-right" src="_images/Picture16.png" />
<img alt="_images/Picture17.png" class="align-right" src="_images/Picture17.png" />
<ul class="simple">
<li><p>The remote devices are typically light weight. A dedicated connection agent, with small footprint, establishes the connection to the Internet services and is responsible for the data exchange.</p></li>
<li><p>Sometimes, e.g. in factory automation, the data from the remote devices is concentrated before transmitting this over the Internet. The concentration devices are referred to as Edge devices.</p></li>
<li><p>In the cloud, after taking care of authentication and authorization, the data is shared via a streaming framework. The data is short-lived in such a streaming framework, up to a couple of hours. Multiple applications can subscribe to parts of the data and receive that data as soon as new information arrives.</p></li>
<li><p>Analysis requiring longer time series will use a streaming or time-series database. Unlike traditional SQL databases, these streaming databases will not reproduce exactly the data as it is stored. Instead, they can summarize data, e.g. store an event count in an interval instead of each and every event in that interval, and they can forget data after an expiration period.</p></li>
<li><p>Visualization of the data in streaming databases is typically the first step in data processing. By looking at the data, you can start understanding what is happening with your remote devices. In a later stage, one can add automatic processing of data.</p></li>
</ul>
<p>Today, you’ll toy around with a miniature set-up for IoT applications, skipping a step or two and merging a few steps
into one. The exercise for today will guide you through the Telegraf – Influxdb – Grafana (TIG) suite.
In this training, you’ll monitor the resource usage of your own SBC on the very same machine. The data will be captured
using an application Telegraf and stored in a streaming database Influxdb. Then, you’ll visualize the contents of the
database using Grafana.</p>
<p>First install and start the services:</p>
<section id="install-grafana">
<h3>Install grafana<a class="headerlink" href="#install-grafana" title="Permalink to this heading">#</a></h3>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>apt-get<span class="w"> </span>install<span class="w"> </span>-y<span class="w"> </span>apt-transport-https
sudo<span class="w"> </span>apt-get<span class="w"> </span>install<span class="w"> </span>-y<span class="w"> </span>software-properties-common<span class="w"> </span>wget
sudo<span class="w"> </span>wget<span class="w"> </span>-q<span class="w"> </span>-O<span class="w"> </span>/usr/share/keyrings/grafana.key<span class="w"> </span>https://apt.grafana.com/gpg.key

<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;deb [signed-by=/usr/share/keyrings/grafana.key] https://apt.grafana.com stable main&quot;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>sudo<span class="w"> </span>tee<span class="w"> </span>-a<span class="w"> </span>/etc/apt/sources.list.d/grafana.list

sudo<span class="w"> </span>apt-get<span class="w"> </span>update
sudo<span class="w"> </span>apt-get<span class="w"> </span>install<span class="w"> </span>grafana
</pre></div>
</div>
</section>
<section id="install-influxdb-and-telegraf">
<h3>Install influxdb and telegraf<a class="headerlink" href="#install-influxdb-and-telegraf" title="Permalink to this heading">#</a></h3>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>wget<span class="w"> </span>-q<span class="w"> </span>https://repos.influxdata.com/influxdata-archive_compat.key
<span class="nb">echo</span><span class="w"> </span><span class="s1">&#39;393e8779c89ac8d958f81f942f9ad7fb82a25e133faddaf92e15b16e6ac9ce4c influxdata-archive_compat.key&#39;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>sha256sum<span class="w"> </span>-c<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>cat<span class="w"> </span>influxdata-archive_compat.key<span class="w"> </span><span class="p">|</span><span class="w"> </span>gpg<span class="w"> </span>--dearmor<span class="w"> </span><span class="p">|</span><span class="w"> </span>sudo<span class="w"> </span>tee<span class="w"> </span>/etc/apt/trusted.gpg.d/influxdata-archive_compat.gpg<span class="w"> </span>&gt;<span class="w"> </span>/dev/null
<span class="nb">echo</span><span class="w"> </span><span class="s1">&#39;deb [signed-by=/etc/apt/trusted.gpg.d/influxdata-archive_compat.gpg] https://repos.influxdata.com/debian stable main&#39;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>sudo<span class="w"> </span>tee<span class="w"> </span>/etc/apt/sources.list.d/influxdata.list

sudo<span class="w"> </span>apt-get<span class="w"> </span>update<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>sudo<span class="w"> </span>apt-get<span class="w"> </span>install<span class="w"> </span>influxdb2<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>sudo<span class="w"> </span>apt-get<span class="w"> </span>install<span class="w"> </span>telegraf
</pre></div>
</div>
</section>
<section id="start-the-services">
<h3>Start the services<a class="headerlink" href="#start-the-services" title="Permalink to this heading">#</a></h3>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>service<span class="w"> </span>influxdb<span class="w"> </span>start
sudo<span class="w"> </span>service<span class="w"> </span>grafana-server<span class="w"> </span>start
</pre></div>
</div>
<p>After setting up the environment follow the steps from:
<a class="reference external" href="https://randomnerdtutorials.com/monitor-raspberry-pi-influxdb-telegraf/">https://randomnerdtutorials.com/monitor-raspberry-pi-influxdb-telegraf/</a>.</p>
</section>
<section id="grafana-configuration">
<h3>Grafana Configuration<a class="headerlink" href="#grafana-configuration" title="Permalink to this heading">#</a></h3>
<p>Now go to the Grafana frontend.</p>
<p>Add the influxdb as an datasource:</p>
<img alt="_images/datasource.png" src="_images/datasource.png" />
<p>Pay attention to the red box. We have to add an extra header to make the InfluxQL to work.
The header must be “Authorization” and the value is “Token &lt;the influxdb token&gt;”. <a class="footnote-reference brackets" href="#id2" id="id1" role="doc-noteref"><span class="fn-bracket">[</span>1<span class="fn-bracket">]</span></a></p>
<p>To add the first dashboard, mouse over the + just below the Grafana Search at the main
page and choose Import. Enter the ID 10578 and Load.</p>
<p>Following a ready-made tutorial to set-up the monitoring of your SBC in Grafana is nice but adding your own code for
your own data is even better. Have a look at <a class="reference external" href="https://github.com/influxdata/influxdb-client-python">https://github.com/influxdata/influxdb-client-python</a>, create a small Python
application that pushes some random data every second to InfluxDb and extend the current dashboard to display your
random data as well.</p>
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="id2" role="note">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id1">1</a><span class="fn-bracket">]</span></span>
<p><a class="reference external" href="https://docs.influxdata.com/influxdb/v2.0/tools/grafana/?t=InfluxQL#token-authentication">https://docs.influxdata.com/influxdb/v2.0/tools/grafana/?t=InfluxQL#token-authentication</a></p>
</aside>
</aside>
</section>
</section>
<section id="summary-of-the-second-week">
<h2>Summary of the second week<a class="headerlink" href="#summary-of-the-second-week" title="Permalink to this heading">#</a></h2>
<p>In the second week of this training, you again covered many topics:</p>
<ul class="simple">
<li><p>You’ve installed and started working with your SBC. On the fly, you have seen the most important concepts to install packages and to start, restart and stop system services.</p></li>
<li><dl class="simple">
<dt>You’ve exercised with many ways to connect to your SBC over a network:</dt><dd><ul>
<li><p>Using SSH</p></li>
<li><p>Using RDP</p></li>
<li><p>Using Samba</p></li>
<li><p>Using a remote debugger</p></li>
<li><p>Using MQTT</p></li>
<li><p>Using a webserver, i.e. Grafana</p></li>
</ul>
</dd>
</dl>
</li>
<li><p>You’ve created your first remote monitoring IoT application, using Telegraf, InfluxDb and Grafana.</p></li>
</ul>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="week3.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Week 3: Build your Virtual Music Instrument</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="week1.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Week 1: Starting Python</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2023, Capgemini BV
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Week 2: Python on a remote system</a><ul>
<li><a class="reference internal" href="#day-1-setting-up-the-remote-system">Day 1: Setting up the remote system</a></li>
<li><a class="reference internal" href="#day-2-cross-development">Day 2: Cross Development</a></li>
<li><a class="reference internal" href="#day-3-network-application-programming">Day 3: Network Application Programming</a></li>
<li><a class="reference internal" href="#day-4-concurrency-and-asyncio">Day 4: Concurrency and AsyncIO</a></li>
<li><a class="reference internal" href="#day-5-iot-and-grafana">Day 5: IoT and Grafana</a><ul>
<li><a class="reference internal" href="#install-grafana">Install grafana</a></li>
<li><a class="reference internal" href="#install-influxdb-and-telegraf">Install influxdb and telegraf</a></li>
<li><a class="reference internal" href="#start-the-services">Start the services</a></li>
<li><a class="reference internal" href="#grafana-configuration">Grafana Configuration</a></li>
</ul>
</li>
<li><a class="reference internal" href="#summary-of-the-second-week">Summary of the second week</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/sphinx_highlight.js"></script>
    <script src="_static/scripts/furo.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script src="_static/tabs.js"></script>
    </body>
</html>